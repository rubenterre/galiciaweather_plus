import{s as K,f as _,a as T,g as m,h as g,c as W,w as J,d as h,j as u,k as ee,i as q,r as c,D as Q,y as G,u as L,E as te,F as re,l as V,m as M,G as X,n as P,H as ae}from"../chunks/scheduler.4c84dceb.js";import{S as O,i as U,b as Y,d as Z,m as $,t as A,c as se,a as B,e as x,g as ne}from"../chunks/index.11ec2f83.js";function le(s){let e,t,n,a,r,l,f,o,p="Busca aquí unha cidade",k,i,d,w='<img src="buscar_icon.png" alt=""/>',D,y;return{c(){e=_("div"),t=_("div"),n=_("div"),a=_("form"),r=_("div"),l=_("input"),f=T(),o=_("label"),o.textContent=p,k=T(),i=_("div"),d=_("button"),d.innerHTML=w,this.h()},l(E){e=m(E,"DIV",{class:!0});var v=g(e);t=m(v,"DIV",{class:!0});var b=g(t);n=m(b,"DIV",{class:!0});var S=g(n);a=m(S,"FORM",{});var I=g(a);r=m(I,"DIV",{class:!0,style:!0});var C=g(r);l=m(C,"INPUT",{id:!0,type:!0,class:!0,placeholder:!0}),f=W(C),o=m(C,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),J(o)!=="svelte-ro67oj"&&(o.textContent=p),C.forEach(h),I.forEach(h),S.forEach(h),b.forEach(h),k=W(v),i=m(v,"DIV",{class:!0});var j=g(i);d=m(j,"BUTTON",{class:!0,"data-svelte-h":!0}),J(d)!=="svelte-1ts7mm3"&&(d.innerHTML=w),j.forEach(h),v.forEach(h),this.h()},h(){u(l,"id","search"),u(l,"type","text"),u(l,"class","validate svelte-2ae48c"),u(l,"placeholder"," "),u(o,"class","active svelte-2ae48c"),u(o,"for","search"),u(r,"class","input-field svelte-2ae48c"),ee(r,"margin","0 4px"),u(n,"class","buscador"),u(t,"class","col s10"),u(d,"class","flecha valign-wrapper svelte-2ae48c"),u(i,"class","col s2"),u(e,"class","row")},m(E,v){q(E,e,v),c(e,t),c(t,n),c(n,a),c(a,r),c(r,l),Q(l,s[0]),c(r,f),c(r,o),c(e,k),c(e,i),c(i,d),D||(y=[G(l,"input",s[2]),G(a,"submit",s[1]),G(d,"click",s[1])],D=!0)},p(E,[v]){v&1&&l.value!==E[0]&&Q(l,E[0])},i:L,o:L,d(E){E&&h(e),D=!1,te(y)}}}function oe(s,e,t){const n="3e867330616c39fa60d18a1af5d82f16",a=re();let r="";async function l(){if(r)try{const o=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${r}&appid=${n}&units=metric&lang=gl`);if(!o.ok)throw new Error("City not found");const p=await o.json();a("weatherData",p)}catch(o){console.error("Error fetching weather data:",o),a("weatherError",o.message)}}function f(){r=this.value,t(0,r)}return[r,l,f]}class ie extends O{constructor(e){super(),U(this,e,oe,le,K,{})}}function H(s){return new Promise((e,t)=>{s.oncomplete=s.onsuccess=()=>e(s.result),s.onabort=s.onerror=()=>t(s.error)})}function ce(s,e){const t=indexedDB.open(s);t.onupgradeneeded=()=>t.result.createObjectStore(e);const n=H(t);return(a,r)=>n.then(l=>r(l.transaction(e,a).objectStore(e)))}let F;function N(){return F||(F=ce("keyval-store","keyval")),F}function ue(s,e=N()){return e("readonly",t=>H(t.get(s)))}function fe(s,e,t=N()){return t("readwrite",n=>(n.put(e,s),H(n.transaction)))}function de(s,e){return s.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},H(s.transaction)}function he(s=N()){return s("readonly",e=>{if(e.getAllKeys)return H(e.getAllKeys());const t=[];return de(e,n=>t.push(n.key)).then(()=>t)})}function _e(s){let e,t,n,a,r,l,f,o,p,k,i,d,w,D,y,E;return{c(){e=_("div"),t=_("div"),n=_("div"),a=_("h3"),r=V(s[1]),l=V("°C"),f=T(),o=_("p"),p=V(s[2]),k=T(),i=_("h4"),d=V(s[0]),w=T(),D=_("div"),y=_("img"),this.h()},l(v){e=m(v,"DIV",{class:!0});var b=g(e);t=m(b,"DIV",{class:!0});var S=g(t);n=m(S,"DIV",{class:!0});var I=g(n);a=m(I,"H3",{class:!0});var C=g(a);r=M(C,s[1]),l=M(C,"°C"),C.forEach(h),f=W(I),o=m(I,"P",{class:!0});var j=g(o);p=M(j,s[2]),j.forEach(h),k=W(I),i=m(I,"H4",{class:!0});var R=g(i);d=M(R,s[0]),R.forEach(h),I.forEach(h),w=W(S),D=m(S,"DIV",{class:!0});var z=g(D);y=m(z,"IMG",{width:!0,src:!0,alt:!0}),z.forEach(h),S.forEach(h),b.forEach(h),this.h()},h(){u(a,"class","svelte-1v00l3l"),u(o,"class","svelte-1v00l3l"),u(i,"class","svelte-1v00l3l"),u(n,"class","col s6 card_buscar-datos svelte-1v00l3l"),u(y,"width","150px"),X(y.src,E="./iconsTempo/"+s[3]+".gif")||u(y,"src",E),u(y,"alt",""),u(D,"class","col s6 vertical-wrapper card_buscar-icono center-align svelte-1v00l3l"),u(t,"class","row"),u(e,"class","card_buscar svelte-1v00l3l")},m(v,b){q(v,e,b),c(e,t),c(t,n),c(n,a),c(a,r),c(a,l),c(n,f),c(n,o),c(o,p),c(n,k),c(n,i),c(i,d),c(t,w),c(t,D),c(D,y)},p(v,[b]){b&2&&P(r,v[1]),b&4&&P(p,v[2]),b&1&&P(d,v[0]),b&8&&!X(y.src,E="./iconsTempo/"+v[3]+".gif")&&u(y,"src",E)},i:L,o:L,d(v){v&&h(e)}}}function me(s,e,t){let{name:n}=e,{temp:a}=e,{description:r}=e,{icon:l}=e,{todos:f}=e;return f=[],fe(f).then(()=>{t(4,f=he([n,a,r,l])),f.map(o=>ue(o)),console.log(f)}).catch(o=>console.log("It failed!",o)),s.$$set=o=>{"name"in o&&t(0,n=o.name),"temp"in o&&t(1,a=o.temp),"description"in o&&t(2,r=o.description),"icon"in o&&t(3,l=o.icon),"todos"in o&&t(4,f=o.todos)},[n,a,r,l,f]}class ve extends O{constructor(e){super(),U(this,e,me,_e,K,{name:0,temp:1,description:2,icon:3,todos:4})}}function pe(s){let e,t,n;return{c(){e=_("p"),t=V("Error: "),n=V(s[1])},l(a){e=m(a,"P",{});var r=g(e);t=M(r,"Error: "),n=M(r,s[1]),r.forEach(h)},m(a,r){q(a,e,r),c(e,t),c(e,n)},p(a,r){r&2&&P(n,a[1])},i:L,o:L,d(a){a&&h(e)}}}function ge(s){let e,t,n;return t=new ve({props:{name:s[0].name,temp:Math.round(s[0].main.temp),description:s[0].weather[0].description,icon:s[0].weather[0].icon}}),{c(){e=_("li"),Y(t.$$.fragment)},l(a){e=m(a,"LI",{});var r=g(e);Z(t.$$.fragment,r),r.forEach(h)},m(a,r){q(a,e,r),$(t,e,null),n=!0},p(a,r){const l={};r&1&&(l.name=a[0].name),r&1&&(l.temp=Math.round(a[0].main.temp)),r&1&&(l.description=a[0].weather[0].description),r&1&&(l.icon=a[0].weather[0].icon),t.$set(l)},i(a){n||(B(t.$$.fragment,a),n=!0)},o(a){A(t.$$.fragment,a),n=!1},d(a){a&&h(e),x(t)}}}function we(s){let e,t,n,a,r,l,f;t=new ie({}),t.$on("weatherData",s[3]),t.$on("weatherError",s[4]);const o=[ge,pe],p=[];function k(i,d){return i[0]?0:i[1]?1:-1}return~(r=k(s))&&(l=p[r]=o[r](s)),{c(){e=_("main"),Y(t.$$.fragment),n=T(),a=_("ul"),l&&l.c(),this.h()},l(i){e=m(i,"MAIN",{class:!0});var d=g(e);Z(t.$$.fragment,d),n=W(d),a=m(d,"UL",{class:!0});var w=g(a);l&&l.l(w),w.forEach(h),d.forEach(h),this.h()},h(){u(a,"class","svelte-1qqm5s4"),ae(a,"list",s[2].length>0),u(e,"class","svelte-1qqm5s4")},m(i,d){q(i,e,d),$(t,e,null),c(e,n),c(e,a),~r&&p[r].m(a,null),f=!0},p(i,[d]){let w=r;r=k(i),r===w?~r&&p[r].p(i,d):(l&&(ne(),A(p[w],1,1,()=>{p[w]=null}),se()),~r?(l=p[r],l?l.p(i,d):(l=p[r]=o[r](i),l.c()),B(l,1),l.m(a,null)):l=null)},i(i){f||(B(t.$$.fragment,i),B(l),f=!0)},o(i){A(t.$$.fragment,i),A(l),f=!1},d(i){i&&h(e),x(t),~r&&p[r].d()}}}function Ee(s,e,t){let n=null,a="",r=[];function l(o){t(0,n=o.detail),t(1,a="")}function f(o){t(1,a=o.detail),t(0,n=null)}return[n,a,r,l,f]}class ke extends O{constructor(e){super(),U(this,e,Ee,we,K,{})}}export{ke as component};
